<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Storage Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.9.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="main.js"></script>
    <script type="text/javascript" charset="utf-8"src="jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery.mobile-1.3.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="SQLitePlugin.js"></script>
    <script type="text/javascript" charset="utf-8">

        document.addEventListener("deviceready", onDeviceReady, false);

        var db;

        function onDeviceReady() {
            db = window.sqlitePlugin.openDatabase("PERSONS.db", "1.0", "test", 20000);

//            db.transaction(function (tx) {
//                tx.executeSql("SELECT Name FROM MY_TABLE;", [], function (tx) {
//                    console.log("column_name length: " + column_name.length);

//                });
//            },
//            function (e) {
//                console.log("ERROR: " + e.message);
            //            });
            db.transaction(queryDB, errorCB, querySuccess); 

        }


        // Query the database
        //
        function queryDB(tx) {
            var ret = tx.rawQuery('SELECT * FROM MY_TABLE', [], querySuccess, errorCB);
            jQuery("#result2").text(ret);
            console.log(ret);
        }

        // Query the success callback
        //
        function querySuccess(tx, results) {
            console.log("Returned rows = " + results.rows.length);
            // this will be true since it was a select statement and so rowsAffected was 0
            if (!results.rowsAffected) {
                console.log('No rows affected!');
                return false;
            }
            // for an insert statement, this property will return the ID of the last inserted row
            console.log("Last inserted row ID = " + results.insertId);
        }

        // Transaction error callback
        //
        function errorCB(err) {
            console.log("Error processing SQL: " + err.code);
        }

        jQuery(function($) {
            $("#result").text("Hello world.");
        })

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Open Database</p>
    <div id="result"></div>
    <div id="result2"></div>
  </body>
</html>
